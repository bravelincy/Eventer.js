!function(n){"use strict";function t(n){return null!==n&&"object"==typeof n}function i(n){return"string"==typeof n}function e(n){return"function"==typeof n}function r(){return Object.create(null)}function o(n,t){for(var i in n)e(t)&&t(i,n[i])}function s(n,t){return[].slice.call(n,t)}function c(){this._listeners=r(),arguments.length&&this.on.apply(this,arguments)}var f=Array.isArray;c._listeners=r();var u={offAll:function(){this._listeners=r()},fireAll:function(n){var t=this;o(this._listeners,function(i){t.fire(i,n)})}},l={on:function(n,t,i){var e=this._listeners[n],r=!1,o={handler:t,isOnce:!!i};e?(r=e.some(function(n){return n.handler===o.handler}),!r&&e.push(o)):this._listeners[n]=[o]},one:function(){var n=s(arguments);n.push(!0),this.on.apply(this,n)},off:function(n,t){var i,e=this,r=this._listeners[n],o=function(){delete e._listeners[n]};t&&f(r)?(i=r.findIndex(function(n){return n.handler===t}),i>-1&&(r.splice(i,1),0===r.length&&o())):o()},fire:function(n,t){var i=this,r=this._listeners[n];r&&r.forEach(function(r){var o={type:n,data:t};e(r.handler)&&r.handler.call(i,o),r.isOnce&&i.off(n,r.handler)})}};o(l,function(n,e){u[n]=function(n){var r,c=this,f=s(arguments,1),u=function(t){n.split(" ").forEach(function(n){var i=[n].concat(t);e.apply(c,i)})};t(n)?(r=n,o(r,function(t,i){n=t,u([i].concat(f))})):i(n)&&u(f)}}),o(u,function(n,t){c.prototype[n]=t,c[n]=t}),n.Eventer=c}(window);
